"use strict";(self.webpackChunkdocusaurus_template=self.webpackChunkdocusaurus_template||[]).push([[97795],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||a;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},31557:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),i=["components"],s={id:"troubleshooting",title:"Tips & Troubleshooting"},l=void 0,u={unversionedId:"debug/troubleshooting",id:"debug/troubleshooting",isDocsHomePage:!1,title:"Tips & Troubleshooting",description:"Please add your troubleshooting tricks and other tips to this document, You can",source:"@site/docs/debug/troubleshooting.md",sourceDirName:"debug",slug:"/debug/troubleshooting",permalink:"/kratos/docs/next/debug/troubleshooting",editUrl:"https://github.com/ory/kratos/edit/master/docs/docs/debug/troubleshooting.md",tags:[],version:"current",lastUpdatedBy:"Vincent",lastUpdatedAt:1643799008,formattedLastUpdatedAt:"2/2/2022",frontMatter:{id:"troubleshooting",title:"Tips & Troubleshooting"},sidebar:"docs",previous:{title:"kratos version",permalink:"/kratos/docs/next/cli/kratos-version"},next:{title:"Common Cookie and CSRF Pitfalls",permalink:"/kratos/docs/next/debug/csrf"}},c=[{value:"<code>400: Bad Request</code> on self-service flows",id:"400-bad-request-on-self-service-flows",children:[],level:3},{value:"How can I separate customers/employee data, but have them use the same login dialog?",id:"how-can-i-separate-customersemployee-data-but-have-them-use-the-same-login-dialog",children:[],level:3},{value:"How can I verify in advance if a username is available during registration?",id:"how-can-i-verify-in-advance-if-a-username-is-available-during-registration",children:[],level:3},{value:"Do have plans to support automatic user migration scenarios?",id:"do-have-plans-to-support-automatic-user-migration-scenarios",children:[],level:3}],d={toc:c};function p(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Please add your troubleshooting tricks and other tips to this document, You can\neither open a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ory/kratos/discussions"},"discussion")," and ping\n",(0,a.kt)("inlineCode",{parentName:"p"},"@ory/documenters")," or\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ory/kratos/edit/master/docs/docs/debug/troubleshooting.md"},"edit the page directly"),"."))),(0,a.kt)("h3",{id:"400-bad-request-on-self-service-flows"},(0,a.kt)("inlineCode",{parentName:"h3"},"400: Bad Request")," on self-service flows"),(0,a.kt)("p",null,"Make sure you are starting and finishing the request in one browser.\nSelf-service browser flows need to be executed in the same browser from start to\nfinish!",(0,a.kt)("br",{parentName:"p"}),"\n","Starting the flow in e.g. Safari and completing it in Chrome won't work. API\nClients like Electron, Postman or Insomnia are browsers themselves, which can\ncause requests to fail. For testing purposes ",(0,a.kt)("a",{parentName:"p",href:"https://curl.se/"},"cURL")," is a good\nchoice."),(0,a.kt)("h3",{id:"how-can-i-separate-customersemployee-data-but-have-them-use-the-same-login-dialog"},"How can I separate customers/employee data, but have them use the same login dialog?"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"We want to separate our customers and employees, so we store them in different\ndatabases. But we would like to have them use the same login dialog for our\nportal.")),(0,a.kt)("p",null,"You can deploy Ory Kratos two times, and use the same login UI pointing to two\ndifferent Kratos login endpoints - ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/customer")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/employee"),",\neither by having two different login routes, or by adding some logic to your\nlogin UI that reroutes customers to ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/customer")," and employees to\n",(0,a.kt)("inlineCode",{parentName:"p"},"/login/employee"),". So you define the same login or registration UI URLs in both\nof the Kratos configurations. You may need to tell your login/registration UI\nwhich Kratos it is supposed to talk to. The instances are cheap to deploy and\nthe databases are completely isolated from each other. For example something\nlike ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/customer")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"/login/employee"),"."),(0,a.kt)("h3",{id:"how-can-i-verify-in-advance-if-a-username-is-available-during-registration"},"How can I verify in advance if a username is available during registration?"),(0,a.kt)("p",null,"You can not right now. It would allow account enumeration attacks. See also the\n",(0,a.kt)("a",{parentName:"p",href:"https://www.ory.sh/kratos/docs/concepts/security/#account-enumeration"},"section in the documentation"),"."),(0,a.kt)("h3",{id:"do-have-plans-to-support-automatic-user-migration-scenarios"},"Do have plans to support automatic user migration scenarios?"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"E.g. configure a callback to the legacy system when you cannot find the\ncorresponding user, and store the identity on successful legacy system\nresponse.")),(0,a.kt)("p",null,"An alternative to callback and custom code is fronting the legacy system with\nOry Hydra (OAuth2/OIDC Server) and then using that as an upstream in Ory Kratos."))}p.isMDXComponent=!0}}]);